exports.id=934,exports.ids=[934],exports.modules={10535:(a,b,c)=>{"use strict";c.d(b,{A:()=>g,y:()=>f});let d=(0,c(70216).h)();class e{getAuthHeaders(){let a=this.getToken();return{"Content-Type":"application/json",...a&&{Authorization:`Bearer ${a}`}}}async login(a){let b=await fetch(`${d}/auth/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}),c=await b.json();if(!b.ok)throw Error(c.error||"Login failed");return c.token&&(this.setToken(c.token),this.setUser(c.user),this.setOrganization(c.organization)),c}async register(a){let b=await fetch(`${d}/auth/register`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}),c=await b.json();if(!b.ok)throw Error(c.error||"Registration failed");return c}async refreshToken(){let a=this.getToken();if(!a)throw Error("No token available for refresh");let b=await fetch(`${d}/auth/refresh`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:a})}),c=await b.json();if(!b.ok)throw Error(c.error||"Token refresh failed");return this.setToken(c.token),c.token}async logout(){try{this.getToken()&&await fetch(`${d}/auth/logout`,{method:"POST",headers:this.getAuthHeaders()})}catch(a){console.warn("Logout API call failed:",a)}finally{localStorage.removeItem("auth_token"),localStorage.removeItem("auth_user"),localStorage.removeItem("auth_organization")}}getToken(){return null}setToken(a){}getUser(){return null}setUser(a){}getOrganization(){return null}setOrganization(a){}isAuthenticated(){return!!this.getToken()}isTokenExpired(){let a=this.getToken();if(!a)return!0;try{let b=JSON.parse(atob(a.split(".")[1])),c=Date.now()/1e3;return b.exp<c}catch{return!0}}async ensureValidToken(){if(!this.isAuthenticated())return null;if(this.isTokenExpired())try{return await this.refreshToken()}catch(a){return localStorage.removeItem("auth_token"),localStorage.removeItem("auth_user"),localStorage.removeItem("auth_organization"),null}return this.getToken()}}let f=new e,g=f},29519:(a,b,c)=>{"use strict";c.d(b,{Providers:()=>d});let d=(0,c(61369).registerClientReference)(function(){throw Error("Attempted to call Providers() from the server but Providers is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\nicus\\Desktop\\Final Tech Resources fore pivot\\LIASE-interface\\frontend\\src\\app\\providers.tsx","Providers")},32947:(a,b,c)=>{"use strict";c.d(b,{Providers:()=>q});var d=c(60687),e=c(54864),f=c(9317);let g=(0,f.Z0)({name:"counter",initialState:{value:0},reducers:{increment:a=>{a.value+=1},decrement:a=>{a.value-=1},incrementByAmount:(a,b)=>{a.value+=b.payload}}}),{increment:h,decrement:i,incrementByAmount:j}=g.actions,k=g.reducer;var l=c(46694);let m=(0,f.U1)({reducer:{counter:k,auth:l.Ay}});c(43210);var n=c(87979);function o({children:a}){let{checkAuth:b}=(0,n.h)();return(0,d.jsx)(d.Fragment,{children:a})}var p=c(74514);function q({children:a}){return(0,d.jsx)(e.Kq,{store:m,children:(0,d.jsx)(o,{children:(0,d.jsx)(p.XI,{children:a})})})}},33627:(a,b,c)=>{Promise.resolve().then(c.bind(c,29519))},46694:(a,b,c)=>{"use strict";c.d(b,{Ay:()=>n,B3:()=>h,ET:()=>l,Lx:()=>f,d3:()=>g,y4:()=>i,z:()=>j});var d=c(9317),e=c(10535);let f=(0,d.zD)("auth/login",async(a,{rejectWithValue:b})=>{try{return await e.A.login(a)}catch(a){return b(a.message||"Login failed")}}),g=(0,d.zD)("auth/register",async(a,{rejectWithValue:b})=>{try{return await e.A.register(a)}catch(a){return b(a.message||"Registration failed")}}),h=(0,d.zD)("auth/refreshToken",async(a,{rejectWithValue:b})=>{try{return{token:await e.A.refreshToken()}}catch(a){return b(a.message||"Token refresh failed")}}),i=(0,d.zD)("auth/logout",async()=>{await e.A.logout()}),j=(0,d.zD)("auth/checkStatus",async(a,{rejectWithValue:b})=>{try{if(!e.A.isAuthenticated())throw Error("Not authenticated");let a=await e.A.ensureValidToken();if(!a)throw Error("Invalid token");let b=e.A.getUser(),c=e.A.getOrganization();return{user:b,organization:c,token:a}}catch(a){return b(a.message||"Authentication check failed")}}),k=(0,d.Z0)({name:"auth",initialState:{user:null,organization:null,token:null,isAuthenticated:!1,isLoading:!1,error:null},reducers:{clearError:a=>{a.error=null},setCredentials:(a,b)=>{a.user=b.payload.user,a.organization=b.payload.organization,a.token=b.payload.token,a.isAuthenticated=!0,a.error=null}},extraReducers:a=>{a.addCase(f.pending,a=>{a.isLoading=!0,a.error=null}).addCase(f.fulfilled,(a,b)=>{a.isLoading=!1,a.user=b.payload.user,a.organization=b.payload.organization,a.token=b.payload.token,a.isAuthenticated=!0,a.error=null}).addCase(f.rejected,(a,b)=>{a.isLoading=!1,a.error=b.payload,a.isAuthenticated=!1,a.user=null,a.organization=null,a.token=null}).addCase(g.pending,a=>{a.isLoading=!0,a.error=null}).addCase(g.fulfilled,a=>{a.isLoading=!1,a.error=null}).addCase(g.rejected,(a,b)=>{a.isLoading=!1,a.error=b.payload}).addCase(h.fulfilled,(a,b)=>{a.token=b.payload.token}).addCase(h.rejected,a=>{a.user=null,a.organization=null,a.token=null,a.isAuthenticated=!1}).addCase(j.fulfilled,(a,b)=>{a.user=b.payload.user,a.organization=b.payload.organization,a.token=b.payload.token,a.isAuthenticated=!0,a.error=null}).addCase(j.rejected,a=>{a.user=null,a.organization=null,a.token=null,a.isAuthenticated=!1}).addCase(i.fulfilled,a=>{a.user=null,a.organization=null,a.token=null,a.isAuthenticated=!1,a.error=null})}}),{clearError:l,setCredentials:m}=k.actions,n=k.reducer},54545:(a,b,c)=>{Promise.resolve().then(c.t.bind(c,25227,23)),Promise.resolve().then(c.t.bind(c,86346,23)),Promise.resolve().then(c.t.bind(c,27924,23)),Promise.resolve().then(c.t.bind(c,40099,23)),Promise.resolve().then(c.t.bind(c,38243,23)),Promise.resolve().then(c.t.bind(c,28827,23)),Promise.resolve().then(c.t.bind(c,62763,23)),Promise.resolve().then(c.t.bind(c,97173,23)),Promise.resolve().then(c.bind(c,25587))},55217:(a,b,c)=>{Promise.resolve().then(c.t.bind(c,16133,23)),Promise.resolve().then(c.t.bind(c,16444,23)),Promise.resolve().then(c.t.bind(c,16042,23)),Promise.resolve().then(c.t.bind(c,49477,23)),Promise.resolve().then(c.t.bind(c,29345,23)),Promise.resolve().then(c.t.bind(c,12089,23)),Promise.resolve().then(c.t.bind(c,46577,23)),Promise.resolve().then(c.t.bind(c,31307,23)),Promise.resolve().then(c.t.bind(c,14817,23))},61135:()=>{},70216:(a,b,c)=>{"use strict";c.d(b,{h:()=>f});let d="https://liase-backend-fpc8gsbrghgacdgx.centralindia-01.azurewebsites.net/api";console.log("API Configuration:",{NEXT_PUBLIC_API_URL:"https://liase-backend-fpc8gsbrghgacdgx.centralindia-01.azurewebsites.net/api",FINAL_API_URL:d});let e={BASE_URL:d},f=()=>(console.log("=== API BASE URL DEBUG ==="),console.log("Environment Variable NEXT_PUBLIC_API_URL:","https://liase-backend-fpc8gsbrghgacdgx.centralindia-01.azurewebsites.net/api"),console.log("Fallback URL:","https://liase-backend-fpc8gsbrghgacdgx.centralindia-01.azurewebsites.net/api"),console.log("Final API_CONFIG.BASE_URL:",e.BASE_URL),console.log("========================="),e.BASE_URL)},70440:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>e});var d=c(31658);let e=async a=>[{type:"image/x-icon",sizes:"16x16",url:(0,d.fillMetadataSegment)(".",await a.params,"favicon.ico")+""}]},74514:(a,b,c)=>{"use strict";c.d(b,{Bk:()=>j,QT:()=>k,Sk:()=>i,XI:()=>h});var d=c(60687),e=c(43210),f=c(87979);let g=(0,e.createContext)(null);function h({children:a}){let{user:b,isAuthenticated:c}=(0,f.h)(),e=a=>!!b&&!!c&&b.role===a;return(0,d.jsx)(g.Provider,{value:{hasPermission:(a,d)=>!!b&&!!c&&!!b.permissions&&b.permissions[a]?.[d]===!0,hasRole:e,isAdmin:()=>!!b&&!!c&&(e("admin")||e("superadmin")),isSuperAdmin:()=>!!b&&!!c&&e("superadmin")},children:a})}function i(){let a=(0,e.useContext)(g);if(!a)throw Error("usePermissions must be used within a PermissionProvider");return a}function j({children:a,resource:b,action:c,roles:e,fallback:f=null,requireAll:g=!1}){try{let{hasPermission:h,hasRole:j}=i();if(!(()=>{let a=[];return b&&c&&a.push(h(b,c)),e&&e.length>0&&(g?a.push(e.every(a=>j(a))):a.push(e.some(a=>j(a)))),0===a.length||(g?a.every(a=>a):a.some(a=>a))})())return(0,d.jsx)(d.Fragment,{children:f});return(0,d.jsx)(d.Fragment,{children:a})}catch(a){return console.warn("PermissionGate error:",a),(0,d.jsx)(d.Fragment,{children:f})}}function k(){let{hasPermission:a,hasRole:b,isAdmin:c,isSuperAdmin:d}=i();return{hasPermission:a,hasRole:b,isAdmin:c,isSuperAdmin:d,canAccess:(b,c)=>a(b,c),canManageUsers:()=>a("users","write"),canManageRoles:()=>a("roles","write"),canDeleteUsers:()=>a("users","delete"),canDeleteRoles:()=>a("roles","delete"),canViewAuditLogs:()=>a("audit","read"),canManageOrganization:()=>a("organizations","write")}}},86771:(a,b,c)=>{Promise.resolve().then(c.bind(c,32947))},87979:(a,b,c)=>{"use strict";c.d(b,{h:()=>g});var d=c(54864),e=c(43210),f=c(46694);let g=()=>{let a=(0,d.wA)(),{user:b,organization:c,isAuthenticated:g,isLoading:h,error:i}=(0,d.d4)(a=>a.auth),j=(0,e.useCallback)(async b=>await a((0,f.Lx)(b)),[a]),k=(0,e.useCallback)(async b=>await a((0,f.d3)(b)),[a]),l=(0,e.useCallback)(async()=>await a((0,f.y4)()),[a]),m=(0,e.useCallback)(()=>{a((0,f.ET)())},[a]);return{user:b,organization:c,isAuthenticated:g,isLoading:h,error:i,login:j,register:k,logout:l,clearError:m,checkAuth:(0,e.useCallback)(async()=>await a((0,f.z)()),[a]),refreshToken:(0,e.useCallback)(async()=>await a((0,f.B3)()),[a])}}},94431:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>f});var d=c(37413);c(61135);var e=c(29519);function f({children:a}){return(0,d.jsx)("html",{lang:"en",children:(0,d.jsx)("body",{children:(0,d.jsx)(e.Providers,{children:a})})})}}};