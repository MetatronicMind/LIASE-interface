(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[454],{31:(e,a,t)=>{Promise.resolve().then(t.bind(t,6616))},1008:(e,a,t)=>{"use strict";t.d(a,{h:()=>s});let r="https://liase-backend-fpc8gsbrghgacdgx.centralindia-01.azurewebsites.net/api";console.log("API Configuration:",{NEXT_PUBLIC_API_URL:"https://liase-backend-fpc8gsbrghgacdgx.centralindia-01.azurewebsites.net/api",FINAL_API_URL:r});let n={BASE_URL:r},s=()=>(console.log("=== API BASE URL DEBUG ==="),console.log("Environment Variable NEXT_PUBLIC_API_URL:","https://liase-backend-fpc8gsbrghgacdgx.centralindia-01.azurewebsites.net/api"),console.log("Fallback URL:","https://liase-backend-fpc8gsbrghgacdgx.centralindia-01.azurewebsites.net/api"),console.log("Final API_CONFIG.BASE_URL:",n.BASE_URL),console.log("========================="),n.BASE_URL)},6616:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>d});var r=t(5155),n=t(2115),s=t(5695),i=t(6681),o=t(6874),l=t.n(o);function d(){let[e,a]=(0,n.useState)({organizationName:"",adminEmail:"",adminPassword:"",confirmPassword:"",adminFirstName:"",adminLastName:"",plan:"basic"}),[t,o]=(0,n.useState)(!0),[d,c]=(0,n.useState)(!1),u=(0,s.useRouter)(),{register:g,isLoading:m,error:h,clearError:b,isAuthenticated:p}=(0,i.h)();(0,n.useEffect)(()=>{p&&u.push("/dashboard")},[p,u]),(0,n.useEffect)(()=>{h&&b()},[e]),(0,n.useEffect)(()=>{o(e.adminPassword===e.confirmPassword||""===e.confirmPassword)},[e.adminPassword,e.confirmPassword]);let x=e=>{let{name:t,value:r}=e.target;a(e=>({...e,[t]:r}))},f=async a=>{if(a.preventDefault(),!t||e.adminPassword.length<8)return;let r={organizationName:e.organizationName,adminEmail:e.adminEmail,adminPassword:e.adminPassword,adminFirstName:e.adminFirstName,adminLastName:e.adminLastName,plan:e.plan};try{let e=await g(r);"fulfilled"===e.meta.requestStatus&&(c(!0),setTimeout(()=>{u.push("/login")},3e3))}catch(e){console.error("Registration failed:",e)}};return d?(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-[linear-gradient(135deg,_#2584eb_0%,_#4fc3f7_100%)] px-4 py-10",children:(0,r.jsx)("div",{className:"w-full max-w-md",children:(0,r.jsxs)("div",{className:"bg-white p-14 rounded-3xl shadow-[0_8px_32px_0_rgba(37,99,235,0.18)] border border-blue-100 text-center",children:[(0,r.jsx)("div",{className:"text-green-600 text-6xl mb-4",children:"âœ“"}),(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Registration Successful!"}),(0,r.jsx)("p",{className:"text-gray-600 mb-4",children:"Your organization has been created successfully. You will be redirected to the login page shortly."}),(0,r.jsx)(l(),{href:"/login",className:"inline-block bg-primary text-white px-6 py-2 rounded-lg font-semibold hover:bg-primary-dark transition",children:"Go to Login"})]})})}):(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-[linear-gradient(135deg,_#2584eb_0%,_#4fc3f7_100%)] px-4 py-10",children:(0,r.jsx)("div",{className:"w-full max-w-2xl",children:(0,r.jsxs)("form",{onSubmit:f,className:"bg-white p-8 rounded-3xl shadow-[0_8px_32px_0_rgba(37,99,235,0.18)] border border-blue-100",children:[(0,r.jsxs)("div",{className:"text-center mb-8",children:[(0,r.jsx)("h1",{className:"text-4xl font-black text-primary mb-2 tracking-wider drop-shadow-sm",children:"LIASE"}),(0,r.jsx)("p",{className:"text-gray-500 text-lg font-medium",children:"Create Your Organization"})]}),(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("label",{className:"block mb-2 font-bold text-gray-800",children:"Organization Name"}),(0,r.jsx)("input",{type:"text",name:"organizationName",className:"w-full border border-gray-300 rounded-lg px-4 py-2.5 focus:outline-none focus:border-primary text-base transition bg-white text-black",value:e.organizationName,onChange:x,required:!0,placeholder:"Your Company Name"})]}),(0,r.jsxs)("div",{className:"grid md:grid-cols-2 gap-6 mb-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block mb-2 font-bold text-gray-800",children:"First Name"}),(0,r.jsx)("input",{type:"text",name:"adminFirstName",className:"w-full border border-gray-300 rounded-lg px-4 py-2.5 focus:outline-none focus:border-primary text-base transition bg-white text-black",value:e.adminFirstName,onChange:x,required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block mb-2 font-bold text-gray-800",children:"Last Name"}),(0,r.jsx)("input",{type:"text",name:"adminLastName",className:"w-full border border-gray-300 rounded-lg px-4 py-2.5 focus:outline-none focus:border-primary text-base transition bg-white text-black",value:e.adminLastName,onChange:x,required:!0})]})]}),(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("label",{className:"block mb-2 font-bold text-gray-800",children:"Admin Email"}),(0,r.jsx)("input",{type:"email",name:"adminEmail",className:"w-full border border-gray-300 rounded-lg px-4 py-2.5 focus:outline-none focus:border-primary text-base transition bg-white text-black",value:e.adminEmail,onChange:x,required:!0,placeholder:"admin@company.com"})]}),(0,r.jsxs)("div",{className:"grid md:grid-cols-2 gap-6 mb-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block mb-2 font-bold text-gray-800",children:"Password"}),(0,r.jsx)("input",{type:"password",name:"adminPassword",className:"w-full border border-gray-300 rounded-lg px-4 py-2.5 focus:outline-none focus:border-primary text-base transition bg-white text-black",value:e.adminPassword,onChange:x,required:!0,minLength:8}),(0,r.jsx)("small",{className:"text-xs text-gray-400 block mt-1",children:"Minimum 8 characters"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block mb-2 font-bold text-gray-800",children:"Confirm Password"}),(0,r.jsx)("input",{type:"password",name:"confirmPassword",className:"w-full border rounded-lg px-4 py-2.5 focus:outline-none text-base transition bg-white text-black ".concat(t?"border-gray-300 focus:border-primary":"border-red-500 focus:border-red-500"),value:e.confirmPassword,onChange:x,required:!0}),!t&&(0,r.jsx)("small",{className:"text-xs text-red-500 block mt-1",children:"Passwords do not match"})]})]}),(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("label",{className:"block mb-2 font-bold text-gray-800",children:"Plan"}),(0,r.jsxs)("select",{name:"plan",className:"w-full border border-gray-300 rounded-lg px-4 py-2.5 focus:outline-none focus:border-primary text-base transition bg-white text-black",value:e.plan,onChange:x,children:[(0,r.jsx)("option",{value:"basic",children:"Basic Plan"}),(0,r.jsx)("option",{value:"professional",children:"Professional Plan"}),(0,r.jsx)("option",{value:"enterprise",children:"Enterprise Plan"})]})]}),h&&(0,r.jsx)("div",{className:"mb-5 text-red-600 text-center font-semibold",children:h}),(0,r.jsx)("button",{type:"submit",disabled:m||!t||e.adminPassword.length<8,className:"w-full bg-primary text-white py-3 rounded-lg font-bold text-lg shadow-md hover:bg-primary-dark transition mb-6 tracking-wide disabled:opacity-50 disabled:cursor-not-allowed",children:m?"Creating Organization...":"Create Organization"}),(0,r.jsx)("div",{className:"text-center",children:(0,r.jsxs)("p",{className:"text-gray-600",children:["Already have an account?"," ",(0,r.jsx)(l(),{href:"/login",className:"text-primary font-semibold hover:underline",children:"Sign In"})]})})]})})})}},6681:(e,a,t)=>{"use strict";t.d(a,{h:()=>i});var r=t(4540),n=t(2115),s=t(7218);let i=()=>{let e=(0,r.wA)(),{user:a,organization:t,isAuthenticated:i,isLoading:o,error:l}=(0,r.d4)(e=>e.auth),d=(0,n.useCallback)(async a=>await e((0,s.Lx)(a)),[e]),c=(0,n.useCallback)(async a=>await e((0,s.d3)(a)),[e]),u=(0,n.useCallback)(async()=>await e((0,s.y4)()),[e]),g=(0,n.useCallback)(()=>{e((0,s.ET)())},[e]);return{user:a,organization:t,isAuthenticated:i,isLoading:o,error:l,login:d,register:c,logout:u,clearError:g,checkAuth:(0,n.useCallback)(async()=>await e((0,s.z)()),[e]),refreshToken:(0,n.useCallback)(async()=>await e((0,s.B3)()),[e])}}},7218:(e,a,t)=>{"use strict";t.d(a,{Ay:()=>m,B3:()=>o,ET:()=>u,Lx:()=>s,d3:()=>i,y4:()=>l,z:()=>d});var r=t(1990),n=t(9959);let s=(0,r.zD)("auth/login",async(e,a)=>{let{rejectWithValue:t}=a;try{return await n.A.login(e)}catch(e){return t(e.message||"Login failed")}}),i=(0,r.zD)("auth/register",async(e,a)=>{let{rejectWithValue:t}=a;try{return await n.A.register(e)}catch(e){return t(e.message||"Registration failed")}}),o=(0,r.zD)("auth/refreshToken",async(e,a)=>{let{rejectWithValue:t}=a;try{return{token:await n.A.refreshToken()}}catch(e){return t(e.message||"Token refresh failed")}}),l=(0,r.zD)("auth/logout",async()=>{await n.A.logout()}),d=(0,r.zD)("auth/checkStatus",async(e,a)=>{let{rejectWithValue:t}=a;try{if(!n.A.isAuthenticated())throw Error("Not authenticated");let e=await n.A.ensureValidToken();if(!e)throw Error("Invalid token");let a=n.A.getUser(),t=n.A.getOrganization();return{user:a,organization:t,token:e}}catch(e){return t(e.message||"Authentication check failed")}}),c=(0,r.Z0)({name:"auth",initialState:{user:null,organization:null,token:null,isAuthenticated:!1,isLoading:!1,error:null},reducers:{clearError:e=>{e.error=null},setCredentials:(e,a)=>{e.user=a.payload.user,e.organization=a.payload.organization,e.token=a.payload.token,e.isAuthenticated=!0,e.error=null}},extraReducers:e=>{e.addCase(s.pending,e=>{e.isLoading=!0,e.error=null}).addCase(s.fulfilled,(e,a)=>{e.isLoading=!1,e.user=a.payload.user,e.organization=a.payload.organization,e.token=a.payload.token,e.isAuthenticated=!0,e.error=null}).addCase(s.rejected,(e,a)=>{e.isLoading=!1,e.error=a.payload,e.isAuthenticated=!1,e.user=null,e.organization=null,e.token=null}).addCase(i.pending,e=>{e.isLoading=!0,e.error=null}).addCase(i.fulfilled,e=>{e.isLoading=!1,e.error=null}).addCase(i.rejected,(e,a)=>{e.isLoading=!1,e.error=a.payload}).addCase(o.fulfilled,(e,a)=>{e.token=a.payload.token}).addCase(o.rejected,e=>{e.user=null,e.organization=null,e.token=null,e.isAuthenticated=!1}).addCase(d.fulfilled,(e,a)=>{e.user=a.payload.user,e.organization=a.payload.organization,e.token=a.payload.token,e.isAuthenticated=!0,e.error=null}).addCase(d.rejected,e=>{e.user=null,e.organization=null,e.token=null,e.isAuthenticated=!1}).addCase(l.fulfilled,e=>{e.user=null,e.organization=null,e.token=null,e.isAuthenticated=!1,e.error=null})}}),{clearError:u,setCredentials:g}=c.actions,m=c.reducer},9959:(e,a,t)=>{"use strict";t.d(a,{A:()=>i,y:()=>s});let r=(0,t(1008).h)();class n{getAuthHeaders(){let e=this.getToken();return{"Content-Type":"application/json",...e&&{Authorization:"Bearer ".concat(e)}}}async login(e){let a=await fetch("".concat(r,"/auth/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),t=await a.json();if(!a.ok)throw Error(t.error||"Login failed");return t.token&&(this.setToken(t.token),this.setUser(t.user),this.setOrganization(t.organization)),t}async register(e){let a=await fetch("".concat(r,"/auth/register"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),t=await a.json();if(!a.ok)throw Error(t.error||"Registration failed");return t}async refreshToken(){let e=this.getToken();if(!e)throw Error("No token available for refresh");let a=await fetch("".concat(r,"/auth/refresh"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:e})}),t=await a.json();if(!a.ok)throw Error(t.error||"Token refresh failed");return this.setToken(t.token),t.token}async logout(){try{this.getToken()&&await fetch("".concat(r,"/auth/logout"),{method:"POST",headers:this.getAuthHeaders()})}catch(e){console.warn("Logout API call failed:",e)}finally{localStorage.removeItem("auth_token"),localStorage.removeItem("auth_user"),localStorage.removeItem("auth_organization")}}getToken(){return localStorage.getItem("auth_token")}setToken(e){localStorage.setItem("auth_token",e)}getUser(){{let e=localStorage.getItem("auth_user");return e?JSON.parse(e):null}}setUser(e){localStorage.setItem("auth_user",JSON.stringify(e))}getOrganization(){{let e=localStorage.getItem("auth_organization");return e?JSON.parse(e):null}}setOrganization(e){localStorage.setItem("auth_organization",JSON.stringify(e))}isAuthenticated(){return!!this.getToken()}isTokenExpired(){let e=this.getToken();if(!e)return!0;try{let a=JSON.parse(atob(e.split(".")[1])),t=Date.now()/1e3;return a.exp<t}catch(e){return!0}}async ensureValidToken(){if(!this.isAuthenticated())return null;if(this.isTokenExpired())try{return await this.refreshToken()}catch(e){return localStorage.removeItem("auth_token"),localStorage.removeItem("auth_user"),localStorage.removeItem("auth_organization"),null}return this.getToken()}}let s=new n,i=s}},e=>{e.O(0,[635,244,441,964,977],()=>e(e.s=31)),_N_E=e.O()}]);