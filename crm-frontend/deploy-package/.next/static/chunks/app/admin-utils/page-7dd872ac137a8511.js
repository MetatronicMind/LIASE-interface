(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[506],{1008:(e,a,t)=>{"use strict";t.d(a,{h:()=>r});let s="https://liase-backend-fpc8gsbrghgacdgx.centralindia-01.azurewebsites.net/api";console.log("API Configuration:",{NEXT_PUBLIC_API_URL:"https://liase-backend-fpc8gsbrghgacdgx.centralindia-01.azurewebsites.net/api",FINAL_API_URL:s});let n={BASE_URL:s},r=()=>(console.log("=== API BASE URL DEBUG ==="),console.log("Environment Variable NEXT_PUBLIC_API_URL:","https://liase-backend-fpc8gsbrghgacdgx.centralindia-01.azurewebsites.net/api"),console.log("Fallback URL:","https://liase-backend-fpc8gsbrghgacdgx.centralindia-01.azurewebsites.net/api"),console.log("Final API_CONFIG.BASE_URL:",n.BASE_URL),console.log("========================="),n.BASE_URL)},5151:(e,a,t)=>{Promise.resolve().then(t.bind(t,5495))},5495:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>l});var s=t(5155),n=t(2115),r=t(1008);function l(){let[e,a]=(0,n.useState)(!1),[t,l]=(0,n.useState)(null),[o,i]=(0,n.useState)(null),c=async()=>{a(!0),i(null),l(null);try{let e=localStorage.getItem("auth_token"),a=await fetch("".concat((0,r.h)(),"/migrate/migrate-admin-permissions"),{method:"POST",headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}}),t=await a.json();a.ok?l("Migration completed successfully! Updated ".concat(t.result.updated," admin users.")):i(t.error||"Migration failed")}catch(e){i(e.message||"Network error during migration")}finally{a(!1)}},d=async()=>{try{let a=localStorage.getItem("auth_token"),t=await fetch("".concat((0,r.h)(),"/roles"),{headers:{Authorization:"Bearer ".concat(a),"Content-Type":"application/json"}}),s=await t.json();if(t.ok){var e;alert("Roles API Test: SUCCESS\nFound ".concat((null==(e=s.roles)?void 0:e.length)||s.length," roles"))}else alert("Roles API Test: FAILED\nStatus: ".concat(t.status,"\nError: ").concat(s.error))}catch(e){alert("Roles API Test: ERROR\n".concat(e.message))}};return(0,s.jsx)("div",{className:"min-h-screen bg-gray-50 py-8 px-4",children:(0,s.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold mb-8",children:"Admin Utilities"}),(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Fix Admin Permissions"}),(0,s.jsx)("p",{className:"text-gray-600 mb-4",children:"This will update all admin users to have the correct role permissions, including roles:read and roles:write."}),(0,s.jsxs)("div",{className:"flex gap-4 mb-4",children:[(0,s.jsx)("button",{onClick:c,disabled:e,className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded disabled:opacity-50",children:e?"Running Migration...":"Fix Admin Permissions"}),(0,s.jsx)("button",{onClick:d,className:"bg-green-600 hover:bg-green-700 text-white px-6 py-2 rounded",children:"Test Roles API"})]}),t&&(0,s.jsx)("div",{className:"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded mb-4",children:t}),o&&(0,s.jsx)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:o})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Current User Info"}),(0,s.jsx)("pre",{className:"bg-gray-100 p-4 rounded text-sm overflow-auto",children:JSON.stringify(JSON.parse(localStorage.getItem("auth_user")||"{}"),null,2)})]}),(0,s.jsxs)("div",{className:"mt-6 flex gap-4",children:[(0,s.jsx)("button",{onClick:()=>window.location.href="/dashboard/user-management",className:"bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded",children:"Back to User Management"}),(0,s.jsx)("button",{onClick:()=>window.location.href="/dashboard/role-management",className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded",children:"Go to Role Management"})]})]})})}}},e=>{e.O(0,[441,964,977],()=>e(e.s=5151)),_N_E=e.O()}]);